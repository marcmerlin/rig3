[[# Entry template.

The generated entry should be a piece of HTML, not a full document.

Parameters:
- base_url: The generated site's base URL. May be empty.
- title: string, title of the entry.
- tags: dict{string tag: string value}, the parsed Izu tags.
- categories: list[string cat], the tags for this entry. Can be empty.
- sections: dict{string name: string content}, the HTML for the various sections.
	- Expected sections names: html (old html), en, fr and images.
- rel_base_url: string, Relative url to base of site. May be empty or like ../../
- permalink_name: string, the permalink simplified name, for anchors
- permalink_url: string, the permalink URL relative to the base URL
]]
<entry>
  <title type="html">[[html title]]</title>
  <link rel="alternate" type="text/html" href="[[raw permalink_url]]"/>
  <id>[[url permalink_name]]</id>
  <published>[[# Converts date to UTC and prints its ISO8601 ]]
    [[html datetime.datetime.utcfromtimestamp(time.mktime(time.gmtime(time.mktime( date.timetuple() )))).isoformat() + "Z" ]]
  </published>
[[if "author" in tags]]
  <author><name>[[html tags["author"].capitalize() ]]</name></author>
[[end]]
[[if categories]]
  [[for cat in categories]]
  <category term="[[raw cat]]" label="[[html c.capitalize]]"/>
  [[end]]
[[end]]
  <content type="html" xml:lang="en" [[if base_url]] xml:base="[[raw base_url]]" [[end]] >

[[if "en" in sections]]
<table class="content en"><tr>
[[if "fr" in sections]]<td class="flag"><img src="[[url rel_base_url]]media/flag_usa.gif" /></td>[[end]]
<td>[[raw sections["en"] ]]</td></tr></table>
[[end]]

[[if "fr" in sections]]
<table class="content fr"><tr><td class="flag">
<td class="flag"><img src="[[url rel_base_url]]media/flag_fr.gif" /></td>
<td>[[raw sections["fr"] ]]</td></tr></table>
[[end]]

[[if "html" in sections]][[raw sections["html"] ]][[end]]

[[if "images" in sections]]
<div class="content images">
[[raw sections["images"] ]]
</div>
[[end]]

  </content>
</entry>
